# 1.1D: Frontend Core Setup

## 🎯 Task Overview
**Agent**: @frontend-architect
**Duration**: 4 hours
**Dependencies**: 1.1A (Project Architecture)
**Risk Level**: Low
**Parallel Execution**: ✅ Can run parallel with 1.1B, 1.1C

## 📋 Objective
Setup React 18 with TypeScript, Vite, TailwindCSS, React Router. Create main layout component optimized for landscape orientation with responsive design and modern development tooling.

## 🎯 Deliverables

### 1. Vite Configuration
```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@components': path.resolve(__dirname, './src/components'),
      '@pages': path.resolve(__dirname, './src/pages'),
      '@services': path.resolve(__dirname, './src/services'),
      '@hooks': path.resolve(__dirname, './src/hooks'),
      '@types': path.resolve(__dirname, './src/types'),
      '@utils': path.resolve(__dirname, './src/utils'),
    },
  },
  server: {
    port: 3000,
    host: true,
    strictPort: true,
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          router: ['react-router-dom'],
        },
      },
    },
  },
  css: {
    devSourcemap: true,
  },
});
```

### 2. TypeScript Configuration
```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@components/*": ["./src/components/*"],
      "@pages/*": ["./src/pages/*"],
      "@services/*": ["./src/services/*"],
      "@hooks/*": ["./src/hooks/*"],
      "@types/*": ["./src/types/*"],
      "@utils/*": ["./src/utils/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

### 3. TailwindCSS Configuration
```javascript
// tailwind.config.js
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        // TCG Tactical Color Palette
        primary: {
          50: '#f0f9ff',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          900: '#1e3a8a',
        },
        humans: {
          primary: '#dc2626',   // Red
          secondary: '#b91c1c',
          light: '#fecaca',
        },
        aliens: {
          primary: '#7c3aed',   // Purple
          secondary: '#6d28d9',
          light: '#ddd6fe',
        },
        robots: {
          primary: '#059669',   // Green
          secondary: '#047857',
          light: '#bbf7d0',
        },
        grid: {
          border: '#374151',
          cell: '#1f2937',
          hover: '#374151',
          valid: '#10b981',
          invalid: '#ef4444',
        }
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
        mono: ['JetBrains Mono', 'monospace'],
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '96': '24rem',
      },
      aspectRatio: {
        'card': '3/4',
        'board': '16/9',
      },
      animation: {
        'fade-in': 'fadeIn 0.2s ease-in-out',
        'slide-in': 'slideIn 0.3s ease-out',
        'card-hover': 'cardHover 0.2s ease-in-out',
        'attack-line': 'attackLine 0.5s ease-in-out',
      }
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
}
```

### 4. Main App Component
```typescript
// src/App.tsx
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { Layout } from '@components/Layout';
import { MainMenu } from '@pages/MainMenu';
import { GameScreen } from '@pages/GameScreen';
import { DeckBuilder } from '@pages/DeckBuilder';
import { Collection } from '@pages/Collection';
import { Profile } from '@pages/Profile';
import { HelpCenter } from '@pages/HelpCenter';
import { NotFound } from '@pages/NotFound';
import { ErrorBoundary } from '@components/ErrorBoundary';
import { ToastProvider } from '@components/Toast';

function App() {
  return (
    <ErrorBoundary>
      <ToastProvider>
        <Router>
          <div className="App min-h-screen bg-gray-900 text-white">
            <Layout>
              <Routes>
                <Route path="/" element={<MainMenu />} />
                <Route path="/game" element={<GameScreen />} />
                <Route path="/deck-builder" element={<DeckBuilder />} />
                <Route path="/collection" element={<Collection />} />
                <Route path="/profile" element={<Profile />} />
                <Route path="/help" element={<HelpCenter />} />
                <Route path="*" element={<NotFound />} />
              </Routes>
            </Layout>
          </div>
        </Router>
      </ToastProvider>
    </ErrorBoundary>
  );
}

export default App;
```

### 5. Layout Component
```typescript
// src/components/Layout.tsx
import React from 'react';
import { useLocation } from 'react-router-dom';
import { Navigation } from './Navigation';
import { DeviceOrientation } from './DeviceOrientation';

interface LayoutProps {
  children: React.ReactNode;
}

export function Layout({ children }: LayoutProps) {
  const location = useLocation();
  const isGameScreen = location.pathname === '/game';

  return (
    <div className="min-h-screen bg-gray-900">
      {/* Force landscape orientation on mobile */}
      <DeviceOrientation />

      {/* Navigation - hidden during game */}
      {!isGameScreen && <Navigation />}

      {/* Main content area */}
      <main className={`
        ${isGameScreen ? 'h-screen' : 'min-h-screen pt-16'}
        ${isGameScreen ? 'overflow-hidden' : ''}
        landscape:p-4
      `}>
        <div className={`
          ${isGameScreen ? 'h-full' : 'container mx-auto'}
          ${isGameScreen ? 'max-w-none' : 'max-w-7xl'}
          px-4
        `}>
          {children}
        </div>
      </main>
    </div>
  );
}
```

### 6. Navigation Component
```typescript
// src/components/Navigation.tsx
import React from 'react';
import { Link, useLocation } from 'react-router-dom';
import {
  HomeIcon,
  PlayIcon,
  CollectionIcon,
  CogIcon,
  UserIcon,
  QuestionMarkCircleIcon
} from '@heroicons/react/24/outline';

const navigation = [
  { name: 'Home', href: '/', icon: HomeIcon },
  { name: 'Play', href: '/game', icon: PlayIcon },
  { name: 'Collection', href: '/collection', icon: CollectionIcon },
  { name: 'Deck Builder', href: '/deck-builder', icon: CogIcon },
  { name: 'Profile', href: '/profile', icon: UserIcon },
  { name: 'Help', href: '/help', icon: QuestionMarkCircleIcon },
];

export function Navigation() {
  const location = useLocation();

  return (
    <nav className="bg-gray-800 border-b border-gray-700 fixed top-0 left-0 right-0 z-50">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between h-16">
          {/* Logo */}
          <Link to="/" className="flex items-center space-x-2">
            <div className="w-8 h-8 bg-primary-500 rounded-lg flex items-center justify-center">
              <span className="text-white font-bold text-lg">T</span>
            </div>
            <span className="text-xl font-bold">TCG Tactique</span>
          </Link>

          {/* Navigation Links */}
          <div className="hidden md:flex space-x-8">
            {navigation.map((item) => {
              const Icon = item.icon;
              const isActive = location.pathname === item.href;

              return (
                <Link
                  key={item.name}
                  to={item.href}
                  className={`
                    flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium
                    transition-colors duration-200
                    ${isActive
                      ? 'bg-primary-600 text-white'
                      : 'text-gray-300 hover:bg-gray-700 hover:text-white'
                    }
                  `}
                >
                  <Icon className="w-5 h-5" />
                  <span>{item.name}</span>
                </Link>
              );
            })}
          </div>

          {/* Mobile menu button */}
          <div className="md:hidden">
            <button className="text-gray-400 hover:text-white p-2">
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </nav>
  );
}
```

### 7. Device Orientation Handler
```typescript
// src/components/DeviceOrientation.tsx
import React, { useEffect, useState } from 'react';

export function DeviceOrientation() {
  const [isPortrait, setIsPortrait] = useState(false);
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const checkOrientation = () => {
      const isPortraitMode = window.innerHeight > window.innerWidth;
      const isMobileDevice = window.innerWidth < 768;

      setIsPortrait(isPortraitMode);
      setIsMobile(isMobileDevice);
    };

    checkOrientation();
    window.addEventListener('resize', checkOrientation);
    window.addEventListener('orientationchange', checkOrientation);

    return () => {
      window.removeEventListener('resize', checkOrientation);
      window.removeEventListener('orientationchange', checkOrientation);
    };
  }, []);

  if (!isMobile || !isPortrait) {
    return null;
  }

  return (
    <div className="fixed inset-0 bg-gray-900 z-50 flex items-center justify-center">
      <div className="text-center p-8">
        <div className="text-6xl mb-4">📱</div>
        <h2 className="text-2xl font-bold mb-4">Rotate Your Device</h2>
        <p className="text-gray-400 mb-6">
          TCG Tactique is designed for landscape mode.
          Please rotate your device for the best experience.
        </p>
        <div className="flex justify-center">
          <div className="animate-spin w-8 h-8 border-2 border-primary-500 border-t-transparent rounded-full"></div>
        </div>
      </div>
    </div>
  );
}
```

### 8. Error Boundary
```typescript
// src/components/ErrorBoundary.tsx
import React, { Component, ErrorInfo, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Uncaught error:', error, errorInfo);
  }

  public render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen bg-gray-900 flex items-center justify-center">
          <div className="text-center p-8">
            <h1 className="text-4xl font-bold text-red-400 mb-4">
              Oops! Something went wrong
            </h1>
            <p className="text-gray-400 mb-6">
              An unexpected error occurred. Please refresh the page to continue.
            </p>
            <button
              onClick={() => window.location.reload()}
              className="bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium"
            >
              Refresh Page
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
```

### 9. Package.json Setup
```json
{
  "name": "tcg-tactique-frontend",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "type-check": "tsc --noEmit",
    "test": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest run --coverage"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.15.0",
    "@heroicons/react": "^2.0.18",
    "clsx": "^2.0.0",
    "socket.io-client": "^4.7.2"
  },
  "devDependencies": {
    "@types/react": "^18.2.15",
    "@types/react-dom": "^18.2.7",
    "@typescript-eslint/eslint-plugin": "^6.0.0",
    "@typescript-eslint/parser": "^6.0.0",
    "@vitejs/plugin-react": "^4.0.3",
    "autoprefixer": "^10.4.14",
    "eslint": "^8.45.0",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.4.3",
    "postcss": "^8.4.27",
    "tailwindcss": "^3.3.3",
    "@tailwindcss/forms": "^0.5.4",
    "@tailwindcss/typography": "^0.5.9",
    "typescript": "^5.0.2",
    "vite": "^4.4.5",
    "vitest": "^0.34.1",
    "@testing-library/react": "^13.4.0",
    "@testing-library/jest-dom": "^5.17.0"
  }
}
```

## ✅ Acceptance Criteria

### Functional Requirements
- [ ] Vite dev server running on port 3000
- [ ] React Router navigation working
- [ ] TailwindCSS styles applying correctly
- [ ] TypeScript compilation with strict mode
- [ ] Landscape orientation enforcement on mobile

### Quality Requirements
- [ ] Component tree organized and scalable
- [ ] Responsive design working across devices
- [ ] Error boundary catching and displaying errors
- [ ] Path aliases resolving correctly
- [ ] Hot reload working for all file types

### Performance Requirements
- [ ] Initial page load < 2 seconds
- [ ] Hot reload < 1 second
- [ ] Bundle size optimized
- [ ] Dev server startup < 10 seconds

## 🧪 Validation Tests

### Automated Tests
```typescript
// src/__tests__/App.test.tsx
import { render, screen } from '@testing-library/react';
import { BrowserRouter } from 'react-router-dom';
import App from '../App';

test('renders navigation', () => {
  render(
    <BrowserRouter>
      <App />
    </BrowserRouter>
  );

  expect(screen.getByText('TCG Tactique')).toBeInTheDocument();
});

test('navigation links work', () => {
  render(
    <BrowserRouter>
      <App />
    </BrowserRouter>
  );

  const playLink = screen.getByText('Play');
  expect(playLink).toBeInTheDocument();
});
```

### Manual Validation
```bash
# Test 1: Development server
npm run dev

# Test 2: Build process
npm run build

# Test 3: Type checking
npm run type-check

# Test 4: Linting
npm run lint

# Test 5: Navigation
# Visit http://localhost:3000 and test all navigation links
```

## 🔧 SuperClaude Command

```bash
@Task "frontend-architect" "Setup React 18 frontend for TCG Tactique with modern development tooling:

CORE SETUP:
- React 18 with TypeScript strict mode
- Vite for fast development and optimized builds
- TailwindCSS with custom TCG-themed color palette
- React Router for navigation

PROJECT STRUCTURE:
- Component-based architecture with clear separation
- Path aliases for clean imports (@components, @pages, etc.)
- Error boundary for graceful error handling
- Layout system optimized for landscape gaming

RESPONSIVE DESIGN:
- Landscape orientation enforcement for mobile
- Responsive grid systems for different screen sizes
- Device-specific optimizations
- Touch-friendly interface elements

DEVELOPMENT EXPERIENCE:
- Hot reload for all file types
- TypeScript path mapping
- ESLint and Prettier integration
- Testing setup with Vitest and React Testing Library

VALIDATION:
- Development server starts in < 10 seconds
- All navigation routes working
- TypeScript compilation successful
- TailwindCSS styles applied correctly
- Mobile landscape enforcement working
- Hot reload functional for all file changes"
```

## 📊 Success Metrics
- **Development Speed**: Hot reload < 1 second
- **Build Time**: < 30 seconds for production build
- **Bundle Size**: < 500KB gzipped
- **Type Safety**: 100% TypeScript coverage

## 🔗 Dependencies & Integration
- **Requires**: 1.1A (Project Architecture)
- **Enables**: All frontend development (components, pages, game interface)
- **Integrates With**: Backend API, WebSocket services

## 📝 Notes
- Prioritize landscape gaming experience over mobile portrait
- Design component system for reusability across game screens
- Implement proper error boundaries for game state errors
- Configure build optimization for game assets and animations